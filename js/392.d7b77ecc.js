"use strict";(self["webpackChunkmanagement_system_new"]=self["webpackChunkmanagement_system_new"]||[]).push([[392],{2392:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var r=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticStyle:{"margin-bottom":"20px"}},[t("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入文物名称"},model:{value:e.params.itemName,callback:function(t){e.$set(e.params,"itemName",t)},expression:"params.itemName"}}),t("el-input",{staticStyle:{width:"240px","margin-left":"5px"},attrs:{placeholder:"请输入文物编码"},model:{value:e.params.itemNo,callback:function(t){e.$set(e.params,"itemNo",t)},expression:"params.itemNo"}}),t("el-input",{staticStyle:{width:"240px","margin-left":"5px"},attrs:{placeholder:"请输入用户名称"},model:{value:e.params.userName,callback:function(t){e.$set(e.params,"userName",t)},expression:"params.userName"}}),t("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary"},on:{click:function(t){return e.load()}}},[t("i",{staticClass:"el-icon-search"}),e._v(" 搜索 ")]),t("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"warning"},on:{click:function(t){return e.reset()}}},[t("i",{staticClass:"el-icon-refresh"}),e._v(" 重置 ")])],1),t("el-table",{attrs:{data:e.tableData,stripe:"","row-key":"id","default-expand-all":""}},[t("el-table-column",{attrs:{prop:"id",label:"序号"}}),t("el-table-column",{attrs:{prop:"itemName",label:"文物名称"}}),t("el-table-column",{attrs:{prop:"itemNo",label:"文物编码",width:"200"}}),t("el-table-column",{attrs:{prop:"userAddress",label:"用户单位"}}),t("el-table-column",{attrs:{prop:"userName",label:"用户名"}}),t("el-table-column",{attrs:{prop:"userPhone",label:"用户手机号"}}),t("el-table-column",{attrs:{prop:"createtime",label:"创建时间"}}),t("el-table-column",{attrs:{prop:"updatetime",label:"更新时间"}}),t("el-table-column",{attrs:{label:"操作",width:"280"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleReturn(a.row.id)}}},[e._v("已归还")]),t("el-popconfirm",{staticStyle:{"margin-left":"5px"},attrs:{title:"您确定删除这行数据吗?"},on:{confirm:function(t){return e.del(a.row.id)}}},[t("el-button",{attrs:{slot:"reference",type:"danger"},slot:"reference"},[e._v("删除")])],1)]}}])})],1),t("div",{staticStyle:{"margin-top":"20px"}},[t("el-pagination",{attrs:{background:"","current-page":e.params.pageNum,"page-size":e.params.pageSize,layout:"prev,pager,next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1)},l=[],s=a(5720),n=a(8704),i={name:"BorrowList",data(){return{admin:n.A.get("admin")?JSON.parse(n.A.get("admin")):{},tableData:[],total:0,params:{pageNum:1,pageSize:10,itemName:"",itemNo:"",userName:""},rules:{name:[{required:!0,message:"请输入文物名称",trigger:"blur"}]}}},created(){this.load()},methods:{load(){s.A.get("/borrow/page",{params:this.params}).then((e=>{"200"===e.code&&(this.tableData=e.data.list,this.total=e.data.total)}))},reset(){this.params={pageNum:1,pageSize:10,itemName:"",itemNo:"",userName:""},this.load()},handleCurrentChange(e){this.params.pageNum=e,this.load()},del(e){s.A.delete("/borrow/delete/"+e).then((e=>{"200"===e.code?(this.$notify.success("删除成功"),this.load()):this.$notify.error(e.msg)}))},async handleReturn(e){try{await this.$confirm('确认文物已归还？状态将变更为"库存中"',"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await s.A.put(`/borrow/return/${e}`),this.$message.success("归还成功"),this.load()}catch(t){"cancel"!==t&&this.$message.error("操作失败: "+(t.response?.data?.message||t.message))}}}},o=i,m=a(1656),p=(0,m.A)(o,r,l,!1,null,"61076dfe",null),c=p.exports}}]);
//# sourceMappingURL=392.d7b77ecc.js.map